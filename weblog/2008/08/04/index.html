<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
		<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" />
		<title>Dan Wood: The Eponymous Weblog (Archives) | by Dan Wood, Karelia Software</title>
		<meta name="description" content="Useful Tidbits and Egotistical Musings from Dan Wood, co-owner of Karelia Software. This blog mostly covers geeky topics like Mac Programming." />

<link rel="alternate" type="application/rss+xml" title="RSS" href="http://gigliwood.com/weblog/index.rss" />



<style type="text/css">

/* color palette: tinyurl.com/tgq5o */

body {
	background:#9191FF;
	margin:0;
	padding:0;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size:76%;
	word-wrap:break-word;
	}


pre { word-wrap:normal !important;
		font:9px monaco;
		margin-right:-3px;
	background:white; padding: 3px; overflow:auto; }


.bio { font-size:80%; margin:auto; text-align:center; padding:10px 40px; }
.description { clear:all; color:white; font-weight:bold; font-size:120%; margin:auto; text-align:center; }

.categories { text-align:center; border-top:1px dashed #888; border-bottom:1px dashed #888; }

#frame {
	margin-left:auto;
	margin-right:auto;
	padding:0px;
	width:785px;
	overflow:auto;
	margin-bottom:80px;
	}
	
#heady {
	background:#12127D;
	color:#B37D00;
	padding:20px 10px 10px 10px;
}

#heady a:link              { color:#FFB200; text-decoration:underline; }
#heady a:visited           { color:#FFB200; text-decoration:none; }
#heady a:hover             { color:#C8C8FF; text-decoration:underline; }
#heady a:active            { color:#FFFFFF; text-decoration:underline; }

h1, h2, h3, h4 {
	margin:0;
}

h1 {
	padding-bottom:20px;
	font-weight:normal;
	font-family:Zapfino, Georgia, serif;
	text-shadow:white 0 0 20px;
	text-align:center;
}
	
#contentcenter {
	width: 565px;
	}

div.dateHeader {
	text-align:right;
	padding:5px;
	font-weight:bold;
	}

/* holds one item */
div.item {
	background:white;
	overflow:auto;
	}

/* sub-holds one item */
div.row {
  		}

div.row .label {
		float: left;
		width: 105px;
		}
		
p.postinfo {
		text-align: right;
		padding:10px 10px 5px 5px;
		font-size:70%;
		margin:0;
}
		
.label h2 {
	color:#12127D;
	font-size:140%;
	background:#ffB200;
	text-shadow:white 2 0 2px;
	padding:5px;
	margin:0;
	font-family:Georgia, serif;
	font-weight:normal;
}

.label img {
	padding:3px 0;
}

.label a:link              { color:#1919B3; text-decoration:none; }
.label a:visited           { color:#9191FF; text-decoration:none; }
.label a:hover             { color:#12127D; text-decoration:underline; }
.label a:active            { color:#B37D00; text-decoration:underline; }


div.row .value {
		float: left;
		width: 440px;
		text-align: left;
		padding:0 10px 60px 10px;
		background:#FFECBF;
		font-family:Georgia, serif;  font-size:110%;
		}

.value a:link              { color:#1919B3; text-decoration:none; }
.value a:visited           { color:#9191FF; text-decoration:none; }
.value a:hover             { color:#12127D; text-decoration:underline; }
.value a:active            { color:#B37D00; text-decoration:underline; }


#sidebar {
	background:#FFD980;
	width:200px;
	padding:20px 10px 80px 10px;
	height:100%;
	text-align:center;
	float:right;
	font-size:80%;
	}

#sidebar a:link              { color:#1919B3; font-weight:normal; text-decoration:underline; }
#sidebar a:visited           { color:#9191FF; font-weight:bold; text-decoration:none; }
#sidebar a:hover             { color:#12127D; font-weight:bold; text-decoration:underline; }
#sidebar a:active            { color:#B37D00; font-weight:bold; text-decoration:underline; }
	
div.calendar {
}
table.month-calendar {
	margin-left:auto;
	margin-right:auto;
	width:80%;
}

.month-calendar, .year-calendar {
	border-collapse:	collapse; 
}
.month-calendar-head, .year-calendar-head {
	background:		#cccccc;
	font-size:		110%;
	font-weight:		bold;
}
.month-calendar-day-head, .year-calendar-subhead {
	font-weight:		normal;
}

.month-calendar-day-noday,
.month-calendar-day-link,     .year-calendar-month-link,
.month-calendar-day-nolink,   .year-calendar-month-nolink,
.month-calendar-day-this-day, .year-calendar-this-month,
.month-calendar-day-future,   .year-calendar-month-future  {
	text-align:		center;
}

.month-calendar-day-future, .year-calendar-month-future {
	color:			#83660F;
}

.Saturday, .Sunday {
	background:		#eeeeee;
}

.month-calendar-day-this-day, .year-calendar-this-month {
	background:		#a5e4ff;
}

</style>

</head>

<body>
<div id="frame">
	<div id="heady">
		<h1>Dan Wood: The Eponymous Weblog <span style="font-size:70%;">(Archives)</span></h1>
		<p class="bio">
			<img style="float:right; margin-top:-20px; border:2px solid gray;" src="http://gigliwood.com/weblogpix/dan_wood.jpeg
" alt="Dan Wood" height="82" width="49" />
		<i>Dan Wood is co-owner of <a href="http://www.karelia.com/">Karelia Software</a>, creating programs for the Macintosh computer.  He is the father of two kids, lives in the Bay Area of California USA, and prefers bicycles to cars.  This site is his older weblog, which mostly covers geeky topics like Macs and Mac Programming.  <a href="http://gigliwood.com/blog">Go visit the current blog here.</a></i>
		</p>
		<p class="description">Useful Tidbits and Egotistical Musings from Dan Wood</p>
		<p class="categories"> <em>Categories:</em> 
		<a href="../../../Business/index.html">Business</a> &middot; 
		<a href="../../../MacOSX/index.html">Mac OS X</a> &middot; 
		<a href="../../../Cocoa/index.html">Cocoa Programming</a> &middot; 
		<a href="../../../General/index.html">General</a> &middot; 
		<a href="../../../index.html"><b>All Categories</b></a>
		</p>
	</div>
	<div id="sidebar">
		<h3>Calendar</h3>
		<div class="calendar">
			<table class="month-calendar"><caption class="month-calendar-head"><a title="July 2008 (4)" href="../../07/index.html">&larr;</a><a title="August 2008 (4)" href="../index.html">August</a><a title="September 2008 (1)" href="../../09/index.html">&rarr;</a></caption>
<tr>
<th class="month-calendar-day-head Sunday">Sun</th>
<th class="month-calendar-day-head Monday">Mon</th>
<th class="month-calendar-day-head Tuesday">Tue</th>
<th class="month-calendar-day-head Wednesday">Wed</th>
<th class="month-calendar-day-head Thursday">Thu</th>
<th class="month-calendar-day-head Friday">Fri</th>
<th class="month-calendar-day-head Saturday">Sat</th>
</tr>
<tr>
<td class="month-calendar-day-noday Sunday">&nbsp;</td>
<td class="month-calendar-day-noday Monday">&nbsp;</td>
<td class="month-calendar-day-noday Tuesday">&nbsp;</td>
<td class="month-calendar-day-noday Wednesday">&nbsp;</td>
<td class="month-calendar-day-noday Thursday">&nbsp;</td>
<td class="month-calendar-day-nolink Friday">1</td>
<td class="month-calendar-day-nolink Saturday">2</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">3</td>
<td class="month-calendar-day-this-day Monday"><a title="Monday, 4 August 2008 (current) (1)" href="index.html">4</a></td>
<td class="month-calendar-day-nolink Tuesday">5</td>
<td class="month-calendar-day-nolink Wednesday">6</td>
<td class="month-calendar-day-nolink Thursday">7</td>
<td class="month-calendar-day-link Friday"><a title="Friday, 8 August 2008 (1)" href="../08/index.html">8</a></td>
<td class="month-calendar-day-nolink Saturday">9</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">10</td>
<td class="month-calendar-day-nolink Monday">11</td>
<td class="month-calendar-day-nolink Tuesday">12</td>
<td class="month-calendar-day-nolink Wednesday">13</td>
<td class="month-calendar-day-nolink Thursday">14</td>
<td class="month-calendar-day-nolink Friday">15</td>
<td class="month-calendar-day-nolink Saturday">16</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">17</td>
<td class="month-calendar-day-nolink Monday">18</td>
<td class="month-calendar-day-nolink Tuesday">19</td>
<td class="month-calendar-day-nolink Wednesday">20</td>
<td class="month-calendar-day-nolink Thursday">21</td>
<td class="month-calendar-day-nolink Friday">22</td>
<td class="month-calendar-day-nolink Saturday">23</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">24</td>
<td class="month-calendar-day-nolink Monday">25</td>
<td class="month-calendar-day-nolink Tuesday">26</td>
<td class="month-calendar-day-nolink Wednesday">27</td>
<td class="month-calendar-day-nolink Thursday">28</td>
<td class="month-calendar-day-nolink Friday">29</td>
<td class="month-calendar-day-link Saturday"><a title="Saturday, 30 August 2008 (2)" href="../30/index.html">30</a></td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">31</td>
<td class="month-calendar-day-noday Monday">&nbsp;</td>
<td class="month-calendar-day-noday Tuesday">&nbsp;</td>
<td class="month-calendar-day-noday Wednesday">&nbsp;</td>
<td class="month-calendar-day-noday Thursday">&nbsp;</td>
<td class="month-calendar-day-noday Friday">&nbsp;</td>
<td class="month-calendar-day-noday Saturday">&nbsp;</td>
</tr>
</table>

		</div>

		<h3><a href="http://amzn.com/w/2663V7TM8IKKC">My Amazon WishList</a></h3>


		<p>Subscribe:
		   <a href="http://gigliwood.com/weblog/index.rss" title="RSS Feed for this category; drag link into a news reader program."><img  src="http://gigliwood.com/weblogpix/rss.gif" alt="RSS" border="0" /></a>
		</p>
		<p>
				<a href="mailto: dan at this domain">Feedback</a></i>
		</p>
		
		<p>
			<b>Also on this website</b>
			<a href="http://gigliwood.com/abcd/">A Basic Course in Dvorak</a> &middot;
			<a href="http://gigliwood.com/kenwood/Pickle/">The Pickle Machine</a> &middot;
			<a href="http://gigliwood.com/mentos/">The Mentos Gallery</a> &middot;
			<a href="http://gigliwood.com/tabletester">Cocoa Table Tester</a> &middot;
			<a href="http://gigliwood.com/wedding">Making your Wedding Make a Difference</a> &middot;
			</p>
		<p>
			<b>Sites I also work on</b>
			<a href="http://www.bikealameda.org/">BikeAlameda</a> &middot;
			<a href="http://progala.blogspot.com/">A Progressive Alamedan (my political blog)</a> &middot;
			<a href="http://www.karelia.com/">Karelia Software</a>
		</p>
		
		<p>
			<b>I'm also here:</b>
			<a href="http://twitter.com/danwood">danwood</a> on Twitter
		</p>
	</div> <!-- end sidebar -->

	<div id="contentcenter">





<div class="dateHeader">Mon, 04 Aug 2008</div>
<div class="item">
	<div class="row">
		<div class="label">
			<h2>A Great Need for Better Localization Solutions for Mac Developers
</h2>
			<p class="postinfo">
				<a href="../../../Cocoa/A_Great_Need_for_Be.html">permanent link</a>
				&middot; Topic<a href="../../../Cocoa/">/Cocoa</a>
				<br />
				<a href="../../../Cocoa/"><img border="0" src="http://gigliwood.com/weblogpix/Cocoa.gif" alt="/Cocoa" /></a>
				
			</p>
		</div>
		<div class="value"><p>
I've been spending the last few days, on and off, dealing with localizations of the new <a href="http://www.sandvox.com/">Sandvox</a> version we are trying to get ready.  Each time we have a new version coming out, I have to go through a lot of tedium and hassle to successfully get Sandvox updated and fully functional in several languages.  It really could be a <em>lot</em> easier than it is now.</p>
<p>
<img src="http://docs.karelia.com/z/img/thumb/f/f1/I18n.jpg/256px-I18n.jpg" style="float:right; margin:0 0 1em 1em;" />
The current version of Sandvox has eight localizations. Besides English, it's in Danish, French, German, Italian, Japanese, Traditional Chinese (Taiwan) and Simplified Chinese (China). The localizations are done by some wonderful, amazing volunteers.  (We may have to drop a couple of supported localizations for our forthcoming 1.5 version; we've lost a couple of our volunteers unfortunately.)  The volunteers all use <a href="http://www.arizona-software.ch/ilocalize/">iLocalize</a>, which is a great (but by no means the only) localization tool out there; if they don't have the program we get them a license for them to use it.</p>
<p>
The ideal workflow goes something like this:  When we are getting near a release, we send a private build of Sandvox out to these localizers.  They each open the application bundle with iLocalize, and it figures out what strings need to be translated, keeping track of the strings that have already been translated.  When they are done, they export the resources (.strings files, .nib files, and a few .html files) and email them back to us.  Using a shell script, I copy the resources into a new directory structure that parallels our subversion repositories (since the topology of an application package is not the same as our source code).  Another script copies the files into the corresponding places in our subversion repository, careful not to stomp on the .svn directories.</p>
<p>
In an ideal world, that would be pretty easy.  The problem is, a release is a moving target.  Even though we declared we were "frozen" for strings about a month ago, little things crop up -- a bugfix may change a string or require a new error message.  Or last-minute changes, like the debut of MobileMe, mean that we have to go through another round of localization.  And frustratingly, we find that even after we have accepted a localization, merged it into our source repository, and built a new version, that new version isn't <em>quite</em> fully localized.  Somehow, some strings got missed.</p>
<p>
The worst problem in all this is nib files.  Once we have localizations in play, a change to a nib (adding or repositioning a label, hooking up a forgotten outlet or action or binding, etc.) has to be propagated to all the localizations, or there will be a bug in your program when it's running under other languages.  This means that the programmer has to go through and make the same change <i>n</i> times, or rely on the translator to know that they have to <em>rebuild</em> the translated nib from the English (source) version.  (I'll assume that English is your source language for the rest of this article.)</p>
<p>
It's very difficult to make sure that all our languages are really working when maintaining multiple nib files is so fragile.  </p>
<p>
".strings" files, though they are a lot simpler and just text files, are not without their problems as well.  If you fix a typo in your English text,  you have to make sure to fix that source string in all of your translated .strings files, or your source will not be found and show up as English in your otherwise translated program.  You are not likely to know that there is a problem unless you can test every message your program will ever encounter in all its translations.  (Peter Hosey's <a href="http://boredzo.org/localization-helper/">Localization Helper</a> is a utility that can help with this a bit, though.)</p>
<p>
The problems of dealing with translations are so great that several developers have abandoned localized nibs completely &mdash;&#160;<a href="http://www.cocoatech.com/">CocoaTech</a> has done this for <em>Path Finder</em>, as has <a href="http://www.delicious-monster.com/">Delicious Monster</a> for <em>Delicious Library</em>.  I'm sure there are others. The alternate approach is to have a single nib, putting in translated strings on-the-fly, and possibly resizing the views programatically to make the elements fit.  (Languages such as French and German take up quite a bit more space than English!)</p>
<p>
On-the-fly localization is a decent idea &mdash; we're considering it for our next major version of Sandvox to alleviate  some of these hassles &mdash;&#160;but it's not without its drawbacks.  You really have to prepare your nibs for the "worst case" scenario of elements fitting.  There are some scenarios in Sandvox that I'm not sure how we could work around: for instance, some labels are so long in their translation that we have to split them into two or three lines to fit.  This affects the horizontal positioning of everything else.  If we left room for the eventual translation,  then the English version would look strange.  When you are aligning elements with each other (for instance, right-justifying several labels to the left of some checkboxes), you would need to move all the items that were aligned.  Or, you just leave a lot of blank space in the English version &mdash;&#160;a feat that sounds like a good idea but is hard to accomplish in small elements such as inspector windows.</p>
<p>
<b>Solutions?</b></p>
<p>
It seems that Apple needs to take Internationalization ("i18n" for those who don't want to type a twenty-letter word) a lot more seriously and integrate this directly into Interface Builder and Xcode.</p>
<p>
Xcode is slightly aware of localized files, and Interface Builder and Xcode are slightly aware of each other, so I don't see why there couldn't be more direct i18n support built in.</p>
<p>
Imagine if your localized files were just always synced with their original counterparts.  If I adjusted a string in my Objective C file, the English .strings file could be automatically updated, and so would the translated versions (with a warning marking to indicate that somebody will need to check the translations.)  If I deleted an English string, the corresponding localizations would be deleted too, since they wouldn't be needed.  If I added a new string, the translated files would have entries for those new strings, marked as needing to be translated.</p>
<p>
If I modified a nib, I'd only have to deal with the English nib.  I could add a connection or binding, fix the spelling of an action's method name, etc. and not have to worry about the translated nibs getting out of sync.  If I added or changed the contents of a textual label, then the translated nib files could be marked as needing to be translated or checked.  If I deleted something, they would be gone in the translated nib.  If I moved or resized something, the translated nibs might indicate a warning if the corresponding string is conflicting with something.</p>
<p>
(I'm always finding that it's very difficult to see when a string has not been given enough room in a translation, and we're forever getting complaints that buttons in German are truncated.  Not surprising, considering I don't speak the language and thus I can't tell at a glance if the text has been truncated!  There needs to be big bold warnings that text is getting truncated in your nibs!)</p>
<p>
Perhaps what is needed is an overhaul of the way that nibs are stored.  Yes, i know that the .xib format in Leopard is new, but couldn't nib files be split into connections (one per nib, period), strings (one per localization), and layout (one per localization if needed), so that it's impossible to get the kinds of inconsistencies that we developers are always fighting?</p>
<p>
Maybe we need more ways to lay out items in a nib so that automatic repositioning is easier, so you can avoid a lot of the headaches of multiple layouts to check.  In the simple cases where a button is the only element on a "line" and you make the text wider, that's a no-brainer.  But when you start dealing with groups of items side by side that need to align with each other, I don't think that there is enough information in the struts-and-springs model we use now to automatically "stretch" things appropriately  to fit different languages automatically.</p>
<p>
What do you think?  Are there any tricks to localization that I haven't covered here?  </p>
<p>
If you agree that Apple needs to make localization easier and more integrated, please <a href="https://bugreport.apple.com/">file a new bug</a> and say "me too" to <b>radar ID <a href="rdar://6078830">6078830</a></b> ...
</p></div>
	</div>
</div>
	</div> <!-- end contentCenter -->
</div> <!-- end frame -->

</body>
</html>

