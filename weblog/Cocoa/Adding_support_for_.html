<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
		<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" />
		<title>Dan Wood: The Eponymous Weblog (Archives) | by Dan Wood, Karelia Software</title>
		<meta name="description" content="Useful Tidbits and Egotistical Musings from Dan Wood, co-owner of Karelia Software. This blog mostly covers geeky topics like Mac Programming." />

<link rel="alternate" type="application/rss+xml" title="RSS" href="http://gigliwood.com/weblog/index.rss" />



<style type="text/css">

/* color palette: tinyurl.com/tgq5o */

body {
	background:#9191FF;
	margin:0;
	padding:0;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size:76%;
	word-wrap:break-word;
	}


pre { word-wrap:normal !important;
		font:9px monaco;
		margin-right:-3px;
	background:white; padding: 3px; overflow:auto; }


.bio { font-size:80%; margin:auto; text-align:center; padding:10px 40px; }
.description { clear:all; color:white; font-weight:bold; font-size:120%; margin:auto; text-align:center; }

.categories { text-align:center; border-top:1px dashed #888; border-bottom:1px dashed #888; }

#frame {
	margin-left:auto;
	margin-right:auto;
	padding:0px;
	width:785px;
	overflow:auto;
	margin-bottom:80px;
	}
	
#heady {
	background:#12127D;
	color:#B37D00;
	padding:20px 10px 10px 10px;
}

#heady a:link              { color:#FFB200; text-decoration:underline; }
#heady a:visited           { color:#FFB200; text-decoration:none; }
#heady a:hover             { color:#C8C8FF; text-decoration:underline; }
#heady a:active            { color:#FFFFFF; text-decoration:underline; }

h1, h2, h3, h4 {
	margin:0;
}

h1 {
	padding-bottom:20px;
	font-weight:normal;
	font-family:Zapfino, Georgia, serif;
	text-shadow:white 0 0 20px;
	text-align:center;
}
	
#contentcenter {
	width: 565px;
	}

div.dateHeader {
	text-align:right;
	padding:5px;
	font-weight:bold;
	}

/* holds one item */
div.item {
	background:white;
	overflow:auto;
	}

/* sub-holds one item */
div.row {
  		}

div.row .label {
		float: left;
		width: 105px;
		}
		
p.postinfo {
		text-align: right;
		padding:10px 10px 5px 5px;
		font-size:70%;
		margin:0;
}
		
.label h2 {
	color:#12127D;
	font-size:140%;
	background:#ffB200;
	text-shadow:white 2 0 2px;
	padding:5px;
	margin:0;
	font-family:Georgia, serif;
	font-weight:normal;
}

.label img {
	padding:3px 0;
}

.label a:link              { color:#1919B3; text-decoration:none; }
.label a:visited           { color:#9191FF; text-decoration:none; }
.label a:hover             { color:#12127D; text-decoration:underline; }
.label a:active            { color:#B37D00; text-decoration:underline; }


div.row .value {
		float: left;
		width: 440px;
		text-align: left;
		padding:0 10px 60px 10px;
		background:#FFECBF;
		font-family:Georgia, serif;  font-size:110%;
		}

.value a:link              { color:#1919B3; text-decoration:none; }
.value a:visited           { color:#9191FF; text-decoration:none; }
.value a:hover             { color:#12127D; text-decoration:underline; }
.value a:active            { color:#B37D00; text-decoration:underline; }


#sidebar {
	background:#FFD980;
	width:200px;
	padding:20px 10px 80px 10px;
	height:100%;
	text-align:center;
	float:right;
	font-size:80%;
	}

#sidebar a:link              { color:#1919B3; font-weight:normal; text-decoration:underline; }
#sidebar a:visited           { color:#9191FF; font-weight:bold; text-decoration:none; }
#sidebar a:hover             { color:#12127D; font-weight:bold; text-decoration:underline; }
#sidebar a:active            { color:#B37D00; font-weight:bold; text-decoration:underline; }
	
div.calendar {
}
table.month-calendar {
	margin-left:auto;
	margin-right:auto;
	width:80%;
}

.month-calendar, .year-calendar {
	border-collapse:	collapse; 
}
.month-calendar-head, .year-calendar-head {
	background:		#cccccc;
	font-size:		110%;
	font-weight:		bold;
}
.month-calendar-day-head, .year-calendar-subhead {
	font-weight:		normal;
}

.month-calendar-day-noday,
.month-calendar-day-link,     .year-calendar-month-link,
.month-calendar-day-nolink,   .year-calendar-month-nolink,
.month-calendar-day-this-day, .year-calendar-this-month,
.month-calendar-day-future,   .year-calendar-month-future  {
	text-align:		center;
}

.month-calendar-day-future, .year-calendar-month-future {
	color:			#83660F;
}

.Saturday, .Sunday {
	background:		#eeeeee;
}

.month-calendar-day-this-day, .year-calendar-this-month {
	background:		#a5e4ff;
}

</style>

</head>

<body>
<div id="frame">
	<div id="heady">
		<h1>Dan Wood: The Eponymous Weblog <span style="font-size:70%;">(Archives)</span></h1>
		<p class="bio">
			<img style="float:right; margin-top:-20px; border:2px solid gray;" src="http://gigliwood.com/weblogpix/dan_wood.jpeg
" alt="Dan Wood" height="82" width="49" />
		<i>Dan Wood is co-owner of <a href="http://www.karelia.com/">Karelia Software</a>, creating programs for the Macintosh computer.  He is the father of two kids, lives in the Bay Area of California USA, and prefers bicycles to cars.  This site is his older weblog, which mostly covers geeky topics like Macs and Mac Programming.  <a href="http://gigliwood.com/blog">Go visit the current blog here.</a></i>
		</p>
		<p class="description">Useful Tidbits and Egotistical Musings from Dan Wood</p>
		<p class="categories"> <em>Categories:</em> 
		<a href="../Business/index.html">Business</a> &middot; 
		<a href="../MacOSX/index.html">Mac OS X</a> &middot; 
		<a href="index.html">Cocoa Programming</a> &middot; 
		<a href="../General/index.html">General</a> &middot; 
		<a href="../index.html"><b>All Categories</b></a>
		</p>
	</div>
	<div id="sidebar">
		<h3>Calendar</h3>
		<div class="calendar">
			<table class="month-calendar"><caption class="month-calendar-head"><a title="April 2007 (1)" href="../2007/04/index.html">&larr;</a><a title="May 2007 (2)" href="../2007/05/index.html">May</a><a title="July 2007 (3)" href="../2007/07/index.html">&rarr;</a></caption>
<tr>
<th class="month-calendar-day-head Sunday">Sun</th>
<th class="month-calendar-day-head Monday">Mon</th>
<th class="month-calendar-day-head Tuesday">Tue</th>
<th class="month-calendar-day-head Wednesday">Wed</th>
<th class="month-calendar-day-head Thursday">Thu</th>
<th class="month-calendar-day-head Friday">Fri</th>
<th class="month-calendar-day-head Saturday">Sat</th>
</tr>
<tr>
<td class="month-calendar-day-noday Sunday">&nbsp;</td>
<td class="month-calendar-day-noday Monday">&nbsp;</td>
<td class="month-calendar-day-nolink Tuesday">1</td>
<td class="month-calendar-day-nolink Wednesday">2</td>
<td class="month-calendar-day-nolink Thursday">3</td>
<td class="month-calendar-day-nolink Friday">4</td>
<td class="month-calendar-day-nolink Saturday">5</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">6</td>
<td class="month-calendar-day-nolink Monday">7</td>
<td class="month-calendar-day-nolink Tuesday">8</td>
<td class="month-calendar-day-nolink Wednesday">9</td>
<td class="month-calendar-day-nolink Thursday">10</td>
<td class="month-calendar-day-link Friday"><a title="Friday, 11 May 2007 (1)" href="../2007/05/11/index.html">11</a></td>
<td class="month-calendar-day-nolink Saturday">12</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">13</td>
<td class="month-calendar-day-nolink Monday">14</td>
<td class="month-calendar-day-nolink Tuesday">15</td>
<td class="month-calendar-day-nolink Wednesday">16</td>
<td class="month-calendar-day-this-day Thursday"><a title="Thursday, 17 May 2007 (current) (1)" href="../2007/05/17/index.html">17</a></td>
<td class="month-calendar-day-nolink Friday">18</td>
<td class="month-calendar-day-nolink Saturday">19</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">20</td>
<td class="month-calendar-day-nolink Monday">21</td>
<td class="month-calendar-day-nolink Tuesday">22</td>
<td class="month-calendar-day-nolink Wednesday">23</td>
<td class="month-calendar-day-nolink Thursday">24</td>
<td class="month-calendar-day-nolink Friday">25</td>
<td class="month-calendar-day-nolink Saturday">26</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">27</td>
<td class="month-calendar-day-nolink Monday">28</td>
<td class="month-calendar-day-nolink Tuesday">29</td>
<td class="month-calendar-day-nolink Wednesday">30</td>
<td class="month-calendar-day-nolink Thursday">31</td>
<td class="month-calendar-day-noday Friday">&nbsp;</td>
<td class="month-calendar-day-noday Saturday">&nbsp;</td>
</tr>
</table>

		</div>

		<h3><a href="http://amzn.com/w/2663V7TM8IKKC">My Amazon WishList</a></h3>


		<p>Subscribe:
		   <a href="http://gigliwood.com/weblog/index.rss" title="RSS Feed for this category; drag link into a news reader program."><img  src="http://gigliwood.com/weblogpix/rss.gif" alt="RSS" border="0" /></a>
		</p>
		<p>
				<a href="mailto: dan at this domain">Feedback</a></i>
		</p>
		
		<p>
			<b>Also on this website</b>
			<a href="http://gigliwood.com/abcd/">A Basic Course in Dvorak</a> &middot;
			<a href="http://gigliwood.com/kenwood/Pickle/">The Pickle Machine</a> &middot;
			<a href="http://gigliwood.com/mentos/">The Mentos Gallery</a> &middot;
			<a href="http://gigliwood.com/tabletester">Cocoa Table Tester</a> &middot;
			<a href="http://gigliwood.com/wedding">Making your Wedding Make a Difference</a> &middot;
			</p>
		<p>
			<b>Sites I also work on</b>
			<a href="http://www.bikealameda.org/">BikeAlameda</a> &middot;
			<a href="http://progala.blogspot.com/">A Progressive Alamedan (my political blog)</a> &middot;
			<a href="http://www.karelia.com/">Karelia Software</a>
		</p>
		
		<p>
			<b>I'm also here:</b>
			<a href="http://twitter.com/danwood">danwood</a> on Twitter
		</p>
	</div> <!-- end sidebar -->

	<div id="contentcenter">





<div class="dateHeader">Thu, 17 May 2007</div>
<div class="item">
	<div class="row">
		<div class="label">
			<h2>Adding support for new file types in your application</h2>
			<p class="postinfo">
				<a href="Adding_support_for_.html">permanent link</a>
				&middot; Topic<a href="../Cocoa/">/Cocoa</a>
				<br />
				<a href="../Cocoa/"><img border="0" src="http://gigliwood.com/weblogpix/Cocoa.gif" alt="/Cocoa" /></a>
				
			</p>
		</div>
		<div class="value"><p>
Recently somebody asked us why Sandvox didn't have support for MIDI files.  I tried it out and sure enough, even though Quicktime knows how to play a MIDI file, I couldn't import one into Sandvox.
</p>
<p>
It turns out that MIDI files are not listed as one of the <a href="http://developer.apple.com/documentation/Carbon/Conceptual/understanding_utis/utilist/chapter_4_section_1.html">UTIs</a> (uniform type identifiers) built into Mac OS X.
</p>
<p>
Sandvox uses UTIs to match file types, as much as possible (since there are some methods in Cocoa that still &mdash; as of Tiger &mdash; don't have UTI equivalents).  So I was able to fix this problem <i>without actually changing any code!</i>
</p>
<hr class="seemore">


<p>
What I did was to add my own declaration of a UTI for MIDI files to the application's Info.plist file.  But what is the right UTI to use? Well, you can make one up of course, but I decided to use a nice <a href="http://www.huw.id.au/filetypes.html">third-party list</a> that is a combination of official and unofficial UTIs.  In this case, I chose "public.midi".
</p>
<p>
The way to declare a new UTI is to declare an array of specific dictionaries under the key of <b>UTImportedTypeDeclarations</b>, and fill in the keys/values as much as possible.  Here is what it looks like in our info.plist:
</p>
<pre>
&lt;key&gt;UTImportedTypeDeclarations&lt;/key&gt;
&lt;array&gt;
  &lt;dict&gt;
    &lt;key&gt;UTTypeDescription&lt;/key&gt;
    &lt;string&gt;MIDI&lt;/string&gt;
    &lt;key&gt;UTTypeIdentifier&lt;/key&gt;
    &lt;string&gt;public.midi&lt;/string&gt;
    &lt;key&gt;UTTypeConformsTo&lt;/key&gt;
    &lt;array&gt;
      &lt;string&gt;public.audio&lt;/string&gt;
      &lt;string&gt;public.audiovisual-content&lt;/string&gt;
      &lt;string&gt;public.data&lt;/string&gt;
      &lt;string&gt;public.item&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;UTTypeReferenceURL&lt;/key&gt;
    &lt;string&gt;http://www.midi.org/about-midi/specinfo.shtml&lt;/string&gt;
    &lt;key&gt;UTTypeTagSpecification&lt;/key&gt;
    &lt;dict&gt;
      &lt;key&gt;public.filename-extension&lt;/key&gt;
      &lt;array&gt;
        &lt;string&gt;mid&lt;/string&gt;
        &lt;string&gt;midi&lt;/string&gt;
      &lt;/array&gt;
      &lt;key&gt;public.mime-type&lt;/key&gt;
      &lt;string&gt;audio/midi&lt;/string&gt;
    &lt;/dict&gt;
  &lt;/dict&gt;
&lt;/array&gt;
</pre>
<p>
We have also found the need to include declarations for Flash files ("com.macromedia.shockwave-flash") and cascading style sheet files ("public.css").
</p>
<p>
Hopefully Apple will continue to expand its list of built-in UTIs so that this is not necessary, except for obscure cases.
</p>

</div>
	</div>
</div>
	</div> <!-- end contentCenter -->
</div> <!-- end frame -->

</body>
</html>

