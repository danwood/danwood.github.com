<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
		<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" />
		<title>Dan Wood: The Eponymous Weblog (Archives) | by Dan Wood, Karelia Software</title>
		<meta name="description" content="Useful Tidbits and Egotistical Musings from Dan Wood, co-owner of Karelia Software. This blog mostly covers geeky topics like Mac Programming." />

<link rel="alternate" type="application/rss+xml" title="RSS" href="http://gigliwood.com/weblog/index.rss" />



<style type="text/css">

/* color palette: tinyurl.com/tgq5o */

body {
	background:#9191FF;
	margin:0;
	padding:0;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size:76%;
	word-wrap:break-word;
	}


pre { word-wrap:normal !important;
		font:9px monaco;
		margin-right:-3px;
	background:white; padding: 3px; overflow:auto; }


.bio { font-size:80%; margin:auto; text-align:center; padding:10px 40px; }
.description { clear:all; color:white; font-weight:bold; font-size:120%; margin:auto; text-align:center; }

.categories { text-align:center; border-top:1px dashed #888; border-bottom:1px dashed #888; }

#frame {
	margin-left:auto;
	margin-right:auto;
	padding:0px;
	width:785px;
	overflow:auto;
	margin-bottom:80px;
	}
	
#heady {
	background:#12127D;
	color:#B37D00;
	padding:20px 10px 10px 10px;
}

#heady a:link              { color:#FFB200; text-decoration:underline; }
#heady a:visited           { color:#FFB200; text-decoration:none; }
#heady a:hover             { color:#C8C8FF; text-decoration:underline; }
#heady a:active            { color:#FFFFFF; text-decoration:underline; }

h1, h2, h3, h4 {
	margin:0;
}

h1 {
	padding-bottom:20px;
	font-weight:normal;
	font-family:Zapfino, Georgia, serif;
	text-shadow:white 0 0 20px;
	text-align:center;
}
	
#contentcenter {
	width: 565px;
	}

div.dateHeader {
	text-align:right;
	padding:5px;
	font-weight:bold;
	}

/* holds one item */
div.item {
	background:white;
	overflow:auto;
	}

/* sub-holds one item */
div.row {
  		}

div.row .label {
		float: left;
		width: 105px;
		}
		
p.postinfo {
		text-align: right;
		padding:10px 10px 5px 5px;
		font-size:70%;
		margin:0;
}
		
.label h2 {
	color:#12127D;
	font-size:140%;
	background:#ffB200;
	text-shadow:white 2 0 2px;
	padding:5px;
	margin:0;
	font-family:Georgia, serif;
	font-weight:normal;
}

.label img {
	padding:3px 0;
}

.label a:link              { color:#1919B3; text-decoration:none; }
.label a:visited           { color:#9191FF; text-decoration:none; }
.label a:hover             { color:#12127D; text-decoration:underline; }
.label a:active            { color:#B37D00; text-decoration:underline; }


div.row .value {
		float: left;
		width: 440px;
		text-align: left;
		padding:0 10px 60px 10px;
		background:#FFECBF;
		font-family:Georgia, serif;  font-size:110%;
		}

.value a:link              { color:#1919B3; text-decoration:none; }
.value a:visited           { color:#9191FF; text-decoration:none; }
.value a:hover             { color:#12127D; text-decoration:underline; }
.value a:active            { color:#B37D00; text-decoration:underline; }


#sidebar {
	background:#FFD980;
	width:200px;
	padding:20px 10px 80px 10px;
	height:100%;
	text-align:center;
	float:right;
	font-size:80%;
	}

#sidebar a:link              { color:#1919B3; font-weight:normal; text-decoration:underline; }
#sidebar a:visited           { color:#9191FF; font-weight:bold; text-decoration:none; }
#sidebar a:hover             { color:#12127D; font-weight:bold; text-decoration:underline; }
#sidebar a:active            { color:#B37D00; font-weight:bold; text-decoration:underline; }
	
div.calendar {
}
table.month-calendar {
	margin-left:auto;
	margin-right:auto;
	width:80%;
}

.month-calendar, .year-calendar {
	border-collapse:	collapse; 
}
.month-calendar-head, .year-calendar-head {
	background:		#cccccc;
	font-size:		110%;
	font-weight:		bold;
}
.month-calendar-day-head, .year-calendar-subhead {
	font-weight:		normal;
}

.month-calendar-day-noday,
.month-calendar-day-link,     .year-calendar-month-link,
.month-calendar-day-nolink,   .year-calendar-month-nolink,
.month-calendar-day-this-day, .year-calendar-this-month,
.month-calendar-day-future,   .year-calendar-month-future  {
	text-align:		center;
}

.month-calendar-day-future, .year-calendar-month-future {
	color:			#83660F;
}

.Saturday, .Sunday {
	background:		#eeeeee;
}

.month-calendar-day-this-day, .year-calendar-this-month {
	background:		#a5e4ff;
}

</style>

</head>

<body>
<div id="frame">
	<div id="heady">
		<h1>Dan Wood: The Eponymous Weblog <span style="font-size:70%;">(Archives)</span></h1>
		<p class="bio">
			<img style="float:right; margin-top:-20px; border:2px solid gray;" src="http://gigliwood.com/weblogpix/dan_wood.jpeg
" alt="Dan Wood" height="82" width="49" />
		<i>Dan Wood is co-owner of <a href="http://www.karelia.com/">Karelia Software</a>, creating programs for the Macintosh computer.  He is the father of two kids, lives in the Bay Area of California USA, and prefers bicycles to cars.  This site is his older weblog, which mostly covers geeky topics like Macs and Mac Programming.  <a href="http://gigliwood.com/blog">Go visit the current blog here.</a></i>
		</p>
		<p class="description">Useful Tidbits and Egotistical Musings from Dan Wood</p>
		<p class="categories"> <em>Categories:</em> 
		<a href="../../Business/index.html">Business</a> &middot; 
		<a href="../../MacOSX/index.html">Mac OS X</a> &middot; 
		<a href="../../Cocoa/index.html">Cocoa Programming</a> &middot; 
		<a href="../../General/index.html">General</a> &middot; 
		<a href="../../index.html"><b>All Categories</b></a>
		</p>
	</div>
	<div id="sidebar">
		<h3>Calendar</h3>
		<div class="calendar">
			<table class="month-calendar"><caption class="month-calendar-head"><a title="July 2007 (3)" href="../07/index.html">&larr;</a><a title="August 2007 (3)" href="index.html">August</a><a title="February 2008 (6)" href="../../2008/02/index.html">&rarr;</a></caption>
<tr>
<th class="month-calendar-day-head Sunday">Sun</th>
<th class="month-calendar-day-head Monday">Mon</th>
<th class="month-calendar-day-head Tuesday">Tue</th>
<th class="month-calendar-day-head Wednesday">Wed</th>
<th class="month-calendar-day-head Thursday">Thu</th>
<th class="month-calendar-day-head Friday">Fri</th>
<th class="month-calendar-day-head Saturday">Sat</th>
</tr>
<tr>
<td class="month-calendar-day-noday Sunday">&nbsp;</td>
<td class="month-calendar-day-noday Monday">&nbsp;</td>
<td class="month-calendar-day-noday Tuesday">&nbsp;</td>
<td class="month-calendar-day-nolink Wednesday">1</td>
<td class="month-calendar-day-nolink Thursday">2</td>
<td class="month-calendar-day-nolink Friday">3</td>
<td class="month-calendar-day-nolink Saturday">4</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">5</td>
<td class="month-calendar-day-nolink Monday">6</td>
<td class="month-calendar-day-nolink Tuesday">7</td>
<td class="month-calendar-day-nolink Wednesday">8</td>
<td class="month-calendar-day-nolink Thursday">9</td>
<td class="month-calendar-day-nolink Friday">10</td>
<td class="month-calendar-day-nolink Saturday">11</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">12</td>
<td class="month-calendar-day-nolink Monday">13</td>
<td class="month-calendar-day-nolink Tuesday">14</td>
<td class="month-calendar-day-link Wednesday"><a title="Wednesday, 15 August 2007 (3)" href="15/index.html">15</a></td>
<td class="month-calendar-day-nolink Thursday">16</td>
<td class="month-calendar-day-nolink Friday">17</td>
<td class="month-calendar-day-nolink Saturday">18</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">19</td>
<td class="month-calendar-day-nolink Monday">20</td>
<td class="month-calendar-day-nolink Tuesday">21</td>
<td class="month-calendar-day-nolink Wednesday">22</td>
<td class="month-calendar-day-nolink Thursday">23</td>
<td class="month-calendar-day-nolink Friday">24</td>
<td class="month-calendar-day-nolink Saturday">25</td>
</tr>
<tr>
<td class="month-calendar-day-nolink Sunday">26</td>
<td class="month-calendar-day-nolink Monday">27</td>
<td class="month-calendar-day-nolink Tuesday">28</td>
<td class="month-calendar-day-nolink Wednesday">29</td>
<td class="month-calendar-day-nolink Thursday">30</td>
<td class="month-calendar-day-nolink Friday">31</td>
<td class="month-calendar-day-noday Saturday">&nbsp;</td>
</tr>
</table>

		</div>

		<h3><a href="http://amzn.com/w/2663V7TM8IKKC">My Amazon WishList</a></h3>


		<p>Subscribe:
		   <a href="http://gigliwood.com/weblog/index.rss" title="RSS Feed for this category; drag link into a news reader program."><img  src="http://gigliwood.com/weblogpix/rss.gif" alt="RSS" border="0" /></a>
		</p>
		<p>
				<a href="mailto: dan at this domain">Feedback</a></i>
		</p>
		
		<p>
			<b>Also on this website</b>
			<a href="http://gigliwood.com/abcd/">A Basic Course in Dvorak</a> &middot;
			<a href="http://gigliwood.com/kenwood/Pickle/">The Pickle Machine</a> &middot;
			<a href="http://gigliwood.com/mentos/">The Mentos Gallery</a> &middot;
			<a href="http://gigliwood.com/tabletester">Cocoa Table Tester</a> &middot;
			<a href="http://gigliwood.com/wedding">Making your Wedding Make a Difference</a> &middot;
			</p>
		<p>
			<b>Sites I also work on</b>
			<a href="http://www.bikealameda.org/">BikeAlameda</a> &middot;
			<a href="http://progala.blogspot.com/">A Progressive Alamedan (my political blog)</a> &middot;
			<a href="http://www.karelia.com/">Karelia Software</a>
		</p>
		
		<p>
			<b>I'm also here:</b>
			<a href="http://twitter.com/danwood">danwood</a> on Twitter
		</p>
	</div> <!-- end sidebar -->

	<div id="contentcenter">





<div class="dateHeader">Wed, 15 Aug 2007</div>
<div class="item">
	<div class="row">
		<div class="label">
			<h2>Source Code Organization</h2>
			<p class="postinfo">
				<a href="../../Cocoa/Source_Code_Organiz.html">permanent link</a>
				&middot; Topic<a href="../../Cocoa/">/Cocoa</a>
				<br />
				<a href="../../Cocoa/"><img border="0" src="http://gigliwood.com/weblogpix/Cocoa.gif" alt="/Cocoa" /></a>
				
			</p>
		</div>
		<div class="value"><p>
Justin "Carpe Aqua" Williams reveals, on his <strike>Pinup Calendar</strike>Blog , his <a href="http://carpeaqua.com/archives/2007/03/02/code_organization_best_practices/">technique for organizing source code</a>.  I thought I'd link to it, since it's useful and very close to what we do.  I don't have a strict template I follow (perhaps I should) but his approach is pretty close.
</p>
<p>
Some additions I'd suggest would be <b>accessors</b> (getters and setters; his "accessors &amp; mutators" could be split up maybe), <b>public methods</b> (general functionality documented in the header file), and <b>private methods</b> or <b>support methods</b>, special functions not exposed to the outside world.
</p>
<p>
If you have lots of different kinds of delegate methods, you can always split up any of your categories into sub-categories (e.g. <b>TextField delegate</b>, <b>Window Delegate</b>, <b>data source</b>, etc.  For a subcategory, you could forgo <tt>#pragma mark -</tt> to make the subcategory stand out less in the popup.
</p>
<p>
If you have a class that is really huge, it's actually helpful to split it up into multiple <em>files</em>.  One ".h" file, declaring multiple categories, with the implementation of each category defined in separate files.  For example, our document window controller subclass is so big, it merits <em>nine</em> files!
</p>
<ul>
<li>KTDocWindowController.m <i>(general methods)</i></li>
<li>KTDocWindowController+Accessors.m</li>
<li>KTDocWindowController+ModalOperation.m</li>
<li>KTDocWindowController+Pasteboard.m</li>
<li>KTDocWindowController+SiteOutline.m</li>
<li>KTDocWindowController+SplitView.m</li>
<li>KTDocWindowController+Toolbar.m</li>
<li>KTDocWindowController+WebView.m</li>
<li>KTDocWindowController+WebEditing.m</li>
</ul>
<p>
A final hint: define a macro "mark" to insert the two pragma-mark lines, using <a href="http://www.obdev.at/products/completion-dictionary/index.html">Completion Dictionary</a>.
</p>
</div>
	</div>
</div>
<div class="item">
	<div class="row">
		<div class="label">
			<h2>Cool Building tips from Terrence</h2>
			<p class="postinfo">
				<a href="../../Cocoa/Cool_Building_tips_.html">permanent link</a>
				&middot; Topic<a href="../../Cocoa/">/Cocoa</a>
				<br />
				<a href="../../Cocoa/"><img border="0" src="http://gigliwood.com/weblogpix/Cocoa.gif" alt="/Cocoa" /></a>
				
			</p>
		</div>
		<div class="value"><p>
<a href="http://talblog.info/">Terrence</a> has written a couple of really cool posts about work he's done that greatly speed up &amp; simplify build processes in Cocoa &amp; XCode....
</p>

<ul>
<li><a href="http://talblog.info/archives/2007/05/fail_faster.html">Fail Faster</a></li>
<li><a href="http://talblog.info/archives/2007/05/look_ma_no_fram.html">Look, Ma. No framework!</a></li>
</ul>
</div>
	</div>
</div>
<div class="item">
	<div class="row">
		<div class="label">
			<h2>PNG compression performance</h2>
			<p class="postinfo">
				<a href="../../Cocoa/PNG_compression_per.html">permanent link</a>
				&middot; Topic<a href="../../Cocoa/">/Cocoa</a>
				<br />
				<a href="../../Cocoa/"><img border="0" src="http://gigliwood.com/weblogpix/Cocoa.gif" alt="/Cocoa" /></a>
				
			</p>
		</div>
		<div class="value"><p>
I've been hearing complaints about how big PNGs are when saved by Sandvox, but I finally got around to testing out this issue.  Check out these results.
</p>
<table cellpadding="3" cellspacing="0">
<tr bgcolor="#CCEEEE"><th>Source</th><th>Dimensions</th><th>File Size</th></tr>
<tr bgcolor="#EEEEEE"><td>JPEG original before reducing &amp; sharpening</td><td>1200 x 1600</td><td>912.1&nbsp;KB</td></tr>
<tr><td>-[NSBitmapImageRep representationUsingType: NSJPEGFileType]<br />(quality 0.7)</td><td>480x640</td><td>101.6&nbsp;KB</td></tr>
<tr><td>-[NSBitmapImageRep representationUsingType: NSPNGFileType]</td><td>480x640</td><td>376.1&nbsp;KB</td></tr>
<tr><td>Above PNG then processed by PNGCrusher</td><td>480x640</td><td>303.7&nbsp;KB</td></tr>
</table>
<p>
Notice that the PNG file when saved from Cocoa are almost four times the size of the JPEG.  Of course, the quality (0.7) is going to impact the JPEG size, but that's still quite a hit!
</p>
<p>
When I processed the output file through <a href="http://www.amake.us/software/pngcrusher/">PNGCrusher</a>, It was able to squeeze a good chunk of wasted space out of the file.  This means that the compression algorithm supplied by Cocoa isn't very optimal.  (It would be nice to have a parameter to pass in to determine how much to optimize, the tradeoff being speed of course.)
</p>
<p>
I wanted to get a sense of how Preview.app would do with this.  I saved the scaled-down image from my program as lossless TIFF, then opened and saved as PNG from preview.  The results were almost the same, just a few bytes in difference.  It's good to know that at least Cocoa's API isn't worse than what Preview uses.  As with the API, it might be nice to have some control over how optimized the compression should be!
</p>
<p>
I think I'm going to file two bugs to Apple.  One requesting API access to better PNG optimization; another requesting Preview to control this optimization.
</p>


</div>
	</div>
</div>
	</div> <!-- end contentCenter -->
</div> <!-- end frame -->

</body>
</html>

